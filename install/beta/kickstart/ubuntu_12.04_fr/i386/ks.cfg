#Generated by Kickstart Configurator
platform=x86

#System language
lang fr_FR
#Language modules to install
langsupport fr_FR
#System keyboard
keyboard fr
#System mouse
mouse
#System timezone
timezone --utc Europe/Paris
#Root password
rootpw --iscrypted $1$.Ho.CJu6$tbV1KBmmTOaYU6h.nIa9G1
#Initial user
user --disabled
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#Use Web installation
url --url http://fr.archive.ubuntu.com/ubuntu/
#System bootloader configuration
bootloader --location=mbr 
#Clear the Master Boot Record
zerombr yes
#Partition clearing information
clearpart --all --initlabel
#Disk partitioning information
part / --fstype ext4 --size 1 --grow
part swap --recommended 
#System authorization infomation
auth  --useshadow  --enablemd5 
#Network information
network --bootproto=dhcp --device=eth0
#Firewall configuration
firewall --disabled 
#Do not configure the X Window System
skipx

%packages
@ ubuntu-server
ssh
sudo
wget
vim
make
zip
unzip
git
debconf-utils
mysql-server
apache2
libapache2-mod-php5
libapache2-mod-bw
php5-common
php5-suhosin
php5-cli
php5-mysql
php5-gd
php5-mcrypt
php5-curl
php-pear
php5-imap
php5-xmlrpc
php5-xsl
db4.7-util 
webalizer
build-essential
bash-completion
dovecot-mysql
dovecot-imapd
dovecot-pop3d
dovecot-common
dovecot-managesieved
dovecot-lmtpd
postfix
postfix-mysql
libsasl2-modules-sql
libsasl2-modules
proftpd-mod-mysql
bind9 bind9utils



%post
apt-get update
apt-get -y dist-upgrade
touch /root/zpx-installer.sh
chmod 777 /root/zpx-installer.sh
cat > /root/zpx-installer.sh <<EOF
#!/bin/bash
cd /root
wget https://raw.github.com/zpanel/installers/master/install/beta/postinstall/ubuntu-12.04.3-fr_posinstall_kickstart.sh
chmod +x ubuntu-12.04.3-fr_posinstall_kickstart.sh
./ubuntu-12.04.3-fr_posinstall_kickstart.sh
#default root password password
echo "root:password" | chpasswd
EOF
cat > /etc/rc.local <<EOM
#!/bin/bash
#
# rc.local
#
# This script is executed at the end of each multiuser runlevel.
# Make sure that the script will "exit 0" on success or any other
# value on error.
#
# In order to enable or disable this script just change the execution
# bits.
#
# By default this script does nothing.
if [ ! -d "/var/zpanel" ]; then
nohup /root/zpx-installer.sh & > /dev/null
fi
exit 0
EOM
eject cdrom
exit
%end
